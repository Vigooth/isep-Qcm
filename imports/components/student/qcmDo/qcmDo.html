<header>
    <h1>Entrainement du qcm : {{$ctrl.qcms.text}}</h1>
</header>
{{$ctrl.cronos}}
<div ng-show="showScore">
    <div class="alert" ng-class="displayAlert(successRate)">
        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        <h3>  Vous avez obtenu {{successRate}}% de bonne réponse ({{score}}/{{numberOfQuestions}})</h3>

    </div>
</div>
<div ng-show="showQuestionsPerPage">
    <select class="form-control" ng-disabled="false"  ng-model="viewby" ng-change="setItemsPerPage(viewby);showHideNextBtn('false')"><option>3</option><option>5</option><option>10</option></select> .


</div>

<div>
    {{counter}}
</div>

<form ng-submit="submitQcm()" >
    <div ng-show="showQcm">

<ul class="ul-question">
    <li class="getQuestion" ng-repeat="question in $ctrl.questions.slice(((currentPage-1)*itemsPerPage), ((currentPage)*itemsPerPage))"><span >{{$index+1+itemsPerPage*(currentPage-1)}}. {{question.text}}?</span>
        <button type="button" class="btn btn-info" data-toggle="collapse" data-target="#collapse{{question._id}}">Petit coup de pouce !</button>
        <ol type="A">
            <li  ng-repeat="answer in $ctrl.answers" ng-if="question._id==answer.question_id">
                <input class="checkB" id="{{answer._id}}" type="checkbox"  ng-model="myVar" ng-click="getQcmScore(answer.text);showHideNextBtn()"  value="answer._id">
               {{answer.text}}<p ng-if="myVar==answer.status">Réponse juste</p>
            </li>
        </ol>
        <div id="collapse{{question._id}}" class="collapse">
            {{question.help}}
        </div>
    </li>
</ul>
        <div ng-show="showNextBtn">



        <ul uib-pager  class="pager" ng-disabled="false" items-per-page="itemsPerPage" total-items="totalItems" ng-model="currentPage"  ng-click="nextPage(correction);"></ul>
        </div>
</div>
    <button class="btn btn-primary" ng-show="showCorrectionBtn" type="submit">Afficher les réponses</button>

</form>
<div ng-show="showCorrection" class="panel-group" id="accordion" >
    <div ng-click="eventTest(correction)">cc:{{statusOfEachQuestions}}</div>
    <div  >
    <ul class="ul-question">

        <li ng-repeat="question in $ctrl.questions">

                <div  class="panel" ng-class="returnPanelColor(statusOfEachQuestions[$index])" >
                    <div class="panel-heading">
                        <h4 class="panel-title"  ng-class="isQuestionFalse(statusOfEachQuestions[$index])">
                            <a class="bababab"
                               data-toggle="collapse" data-parent="#accordion" href="#collapses{{question._id}}">
                                {{$index+1}}. {{question.text}}?
                            </a>
                        </h4>
                    </div>
                    <div id="collapses{{question._id}}" class="panel-collapse collapse" >
                        <div  class="panel-body">
                            <ol type="A">
                                <li  ng-repeat="answer in $ctrl.answers" ng-if="question._id==answer.question_id" ng-class="isAnswerTrue()">
                                    {{answer.text}}
                                </li>
                            </ol>
                        </div>
                        <div class="panel-footer">
                            <p><strong>Explication</strong><br>
                        </p><ul><li>{{question.explanation}}</li></ul></div>
                    </div>
                </div>
            <br>
        </li>

    </ul>
    </div>
</div>
